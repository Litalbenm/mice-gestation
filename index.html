<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mice Gestational Day Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            width: 300px;
            margin: 20px auto;
        }
        .day {
            padding: 10px;
            border: 1px solid #ccc;
        }
        .pregnancy-day {
            background-color: pink;
        }
        .scan-day {
            background-color: lightblue;
        }
    </style>
</head>
<body>
    <h1>Mice Gestational Day Calculator</h1>
    <label for="matingDate">Select Mating Date:</label>
    <input type="date" id="matingDate">
    
    <label for="scanDay">Select Preferred Scanning Day (E value):</label>
    <input type="number" id="scanDay" min="0" max="20">
    
    <button onclick="calculateDates()">Calculate</button>
    
    <h2>Gestational Calendar</h2>
    <div class="calendar" id="calendar"></div>
    
    <h2>Required Mating Date for Desired Scan Day</h2>
    <p id="matingResult"></p>
    
    <script>
        function calculateDates() {
            const matingDateInput = document.getElementById("matingDate").value;
            const scanDayInput = parseInt(document.getElementById("scanDay").value, 10);
            const calendarDiv = document.getElementById("calendar");
            const matingResult = document.getElementById("matingResult");
            
            if (!matingDateInput) {
                alert("Please select a mating date.");
                return;
            }
            
            const matingDate = new Date(matingDateInput);
            const calendarDays = [];
            
            for (let i = 0; i <= 20; i++) {
                let currentDay = new Date(matingDate);
                currentDay.setDate(currentDay.getDate() + i);
                calendarDays.push({
                    date: currentDay,
                    label: `E${i}.5`,
                    isPregnancy: true,
                    isScan: i === scanDayInput
                });
            }
            
            calendarDiv.innerHTML = "";
            calendarDays.forEach(day => {
                const dayDiv = document.createElement("div");
                dayDiv.classList.add("day");
                if (day.isPregnancy) dayDiv.classList.add("pregnancy-day");
                if (day.isScan) dayDiv.classList.add("scan-day");
                dayDiv.innerHTML = `${day.label} <br> ${day.date.toDateString()}`;
                calendarDiv.appendChild(dayDiv);
            });
            
            if (!isNaN(scanDayInput)) {
                let requiredMatingDate = new Date(matingDate);
                requiredMatingDate.setDate(requiredMatingDate.getDate() - scanDayInput);
                matingResult.innerText = `To have the desired scan on E${scanDayInput}.5, the required mating date is: ${requiredMatingDate.toDateString()}`;
            }
        }
    </script>
</body>
</html>
